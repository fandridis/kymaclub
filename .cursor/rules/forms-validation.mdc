---
globs: **/*form*.tsx,**/*Form*.tsx,**/*validation*.ts,**/*validations/*
---

# Forms & Validation Patterns

## React Hook Form + Zod Pattern
```typescript
const form = useForm({
  resolver: zodResolver(schema), // Let TypeScript infer types
  defaultValues: { name: "", email: "" }
});
```

## Validation Rules
- **Field-specific errors** with proper attribution
- **Centralized error codes** using `ERROR_CODES` constants
- **Graceful degradation** - handle edge cases without crashing
- **Real-time validation** with debounced input

## Form Components
- **shadcn/ui** form components for consistency
- **Loading states** during submission
- **Error display** with field-specific messages
- **Success feedback** with toast notifications

## Backend Validation
- **Zod schemas** for input validation
- **Business rule validation** in `rules/` directory
- **Field constraints** (length, format, required)
- **Custom validators** for complex business logic

## Error Handling
- **ConvexError** with structured error objects
- **Field attribution** for form error display
- **User-friendly messages** with clear instructions
- **Retry mechanisms** for transient failures