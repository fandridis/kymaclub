---
description: Quick reference guide for common patterns and conventions
---

# Quick Reference Guide

## ðŸš€ Getting Started
```bash
# Install dependencies
pnpm i

# Start development
pnpm dev

# Build all packages  
pnpm build

# Run tests
pnpm test
```

## ðŸ“ Project Structure
- **Apps**: `apps/mobile-consumer`, `apps/web-business`, `apps/web-consumer`, `apps/web-landing`
- **Packages**: `packages/api`, `packages/utils`, `packages/ui`, `packages/frontend-shared`
- **Shared**: `packages/eslint-config`, `packages/typescript-config`

## ðŸŽ¯ Key Technologies
- **Frontend**: React 19, TypeScript 5.8, TanStack Router, Zustand, Tailwind CSS
- **Mobile**: React Native 0.79.5, Expo SDK 53, React Navigation, FlashList
- **Backend**: Convex 1.23, @convex-dev/auth, Stripe payments
- **Build**: Vite, Turborepo, Cloudflare Workers, pnpm

## ðŸ’¡ Common Patterns

### React Component
```typescript
import React, { memo } from 'react';
import { theme } from '../theme';

interface ComponentProps {
  title: string;
  onPress?: () => void;
}

export const Component = memo<ComponentProps>(({ title, onPress }) => {
  return (
    <TouchableOpacity onPress={onPress}>
      <Text style={styles.title}>{title}</Text>
    </TouchableOpacity>
  );
});

Component.displayName = 'Component';
```

### Convex Query Hook
```typescript
const { data, loading, error } = useQuery(api.classes.instances.getInstances, {
  businessId: user?.businessId
});
```

### Form with Validation
```typescript
const form = useForm({
  resolver: zodResolver(schema),
  defaultValues: { name: "", email: "" }
});
```

### Error Handling
```typescript
try {
  await mutation(args);
} catch (error) {
  if (error instanceof ConvexError) {
    toast.error(error.message);
  }
}
```

## ðŸŽ¨ Styling
- **Theme**: Use `theme.colors.zinc[900]` instead of hardcoded colors
- **Spacing**: Use `theme.spacing.md` for consistent spacing
- **React Native**: Always use `StyleSheet.create()`
- **Web**: Use Tailwind classes with shadcn/ui components

## ðŸ”’ Security
- **Authentication**: Use @convex-dev/auth
- **Authorization**: Check user roles and businessId
- **Validation**: Use Zod schemas for all inputs
- **Payments**: Use Stripe, never store card details

## ðŸ“Š Business Rules
- **Credits**: 1 credit = 50 cents spending value
- **Timezone**: All times in business local timezone
- **Revenue**: 20% system cut on completed bookings
- **Bookings**: Max 5 active bookings per consumer

## ðŸ§ª Testing
- **Unit**: Test pure functions in `rules/` and `operations/`
- **Integration**: Test workflows in `integrationTests/`
- **E2E**: Use Playwright for critical user journeys
- **Coverage**: Aim for 90%+ on core business logic